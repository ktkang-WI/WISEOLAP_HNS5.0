<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.wise.MarketingPlatForm.dataset.dao.DatasetDAO">
  <!-- Mapper -->

	<resultMap id="DsMstr" type="com.wise.MarketingPlatForm.dataset.entity.DSMstrEntity">
		<result column="DS_ID" property="dsId" javaType="int"/>
    <result column="DS_NM" property="dsNm" javaType="String"/>
    <result column="DB_NM" property="dbNm" javaType="String"/>
    <result column="USER_ID" property="userId" javaType="String"/>
    <result column="PASSWD" property="password" javaType="String"/>
    <result column="PORT" property="port" javaType="String"/>
    <result column="DBMS_TYPE" property="dbmsType" javaType="String"/>
    <result column="OWNER_NM" property="ownerNm" javaType="String"/>
    <result column="DS_DESC" property="dsDesc" javaType="String"/>
    <result column="DS_CONNECTOR" property="connector" javaType="String"/>
    <result column="USER_AREA_YN" property="userAreaYn" javaType="String"/>
    <result column="HASH_YN" property="hashYn" javaType="String"/>
    <result column="WF_YN" property="wfYn" javaType="String"/>
	</resultMap>
	
  <!-- Mapper End -->

  <!-- Query -->

  	<select id="selectUserAuthDsList" parameterType="String" resultMap="DsMstr">
      SELECT
        DS_MSTR.DS_ID AS DS_ID,
        DS_NM,
        DB_NM,
        IP,
        DS_MSTR.USER_ID AS USER_ID,
        PORT,
        DBMS_TYPE,
        OWNER_NM,
        DS_DESC,
        WF_YN,
        USER_AREA_YN
      from GRP_AUTH_DS_MSTR
        INNER JOIN DS_MSTR ON DS_MSTR.DS_ID = GRP_AUTH_DS_MSTR.DS_ID
        INNER JOIN USER_MSTR ON USER_MSTR.GRP_ID = GRP_AUTH_DS_MSTR.GRP_ID
      WHERE USER_MSTR.USER_ID = #{userId}
      ORDER BY DS_NM
	</select>

	<select id="selectGrpAuthDsList" parameterType="String" resultMap="DsMstr">
		SELECT
			DS_MSTR.DS_ID AS DS_ID,
			DS_NM,
			DB_NM,
			IP,
			DS_MSTR.USER_ID AS USER_ID,
			PORT,
			DBMS_TYPE,
			OWNER_NM,
			DS_DESC,
			WF_YN,
			USER_AREA_YN
		from GRP_AUTH_DS_MSTR
			INNER JOIN DS_MSTR ON DS_MSTR.DS_ID = GRP_AUTH_DS_MSTR.DS_ID
			INNER JOIN USER_MSTR ON USER_MSTR.GRP_ID = GRP_AUTH_DS_MSTR.GRP_ID
		WHERE USER_MSTR.USER_ID = #{userId}
		ORDER BY DS_NM
	</select>

  <!-- Query End -->
</mapper>